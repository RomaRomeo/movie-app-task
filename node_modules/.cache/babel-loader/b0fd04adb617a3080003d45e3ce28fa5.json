{"remainingRequest":"/Users/macbookpro/Desktop/movie-app-task/node_modules/babel-loader/lib/index.js!/Users/macbookpro/Desktop/movie-app-task/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/macbookpro/Desktop/movie-app-task/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macbookpro/Desktop/movie-app-task/src/pages/MoviesComponent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/macbookpro/Desktop/movie-app-task/src/pages/MoviesComponent.vue","mtime":1611062956302},{"path":"/Users/macbookpro/Desktop/movie-app-task/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macbookpro/Desktop/movie-app-task/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macbookpro/Desktop/movie-app-task/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macbookpro/Desktop/movie-app-task/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zZWFyY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwp2YXIgYXBpS2V5ID0gJ2VmODE3ZDUwOWQ1ZGJmOWNlOGI0NGM3M2U3YmIzMGI0JzsKbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FwaUtleScsIGFwaUtleSk7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnbW92aWVzJywKICBwcm9wczogewogICAgaWQ6IE51bWJlcgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1vdmllUG9zdGVyQmFzZVVybDogJ2h0dHBzOi8vaW1hZ2UudG1kYi5vcmcvdC9wL3c2MDBfYW5kX2g5MDBfYmVzdHYyJywKICAgICAgbW92aWVMaXN0OiBudWxsLAogICAgICBwYWdpbmF0aW9uOiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICB0b3RhbDogMAogICAgICB9LAogICAgICBxdWVyeTogJycsCiAgICAgIHNlYXJjaDogZmFsc2UKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBvbkZldGNoTW92aWVzOiBmdW5jdGlvbiBvbkZldGNoTW92aWVzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgYXhpb3MuZ2V0KCJodHRwczovL2FwaS50aGVtb3ZpZWRiLm9yZy8zL2Rpc2NvdmVyL21vdmllP2FwaV9rZXk9Ii5jb25jYXQoYXBpS2V5LCAiJnBhZ2U9IikuY29uY2F0KHRoaXMucGFnaW5hdGlvbi5wYWdlKSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5tb3ZpZUxpc3QgPSByZXNwb25zZTsKICAgICAgICBfdGhpcy5wYWdpbmF0aW9uLnBhZ2UgPSBfdGhpcy5tb3ZpZUxpc3QuZGF0YS5wYWdlOwogICAgICAgIF90aGlzLnBhZ2luYXRpb24udG90YWwgPSBfdGhpcy5tb3ZpZUxpc3QuZGF0YS50b3RhbF9wYWdlczsKCiAgICAgICAgX3RoaXMubW92aWVMaXN0LmRhdGEucmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uIChtb3YpIHsKICAgICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTdHJpbmcobW92LmlkKSkpIHsKICAgICAgICAgICAgbW92LmZhdm91cml0ZSA9IEJvb2xlYW4obG9jYWxTdG9yYWdlLmdldEl0ZW0oU3RyaW5nKG1vdi5pZCkpKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1vdi5mYXZvdXJpdGUgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KTsgLy8gY29uc29sZS5sb2codGhpcy5tb3ZpZUxpc3QuZGF0YS5yZXN1bHRzKTsKCiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciB3aGlsZSBmZXRjaGluZyBtb3ZpZXMnLCBlcnJvcik7CiAgICAgIH0pOwogICAgfSwKICAgIG9uU2VhcmNoTW92aWVzOiBmdW5jdGlvbiBvblNlYXJjaE1vdmllcyhxdWVyeSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmIChxdWVyeSkgewogICAgICAgIGF4aW9zLmdldCgiaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy9zZWFyY2gvbW92aWU/YXBpX2tleT0iLmNvbmNhdChhcGlLZXksICImcXVlcnk9IikuY29uY2F0KHF1ZXJ5KSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIF90aGlzMi5tb3ZpZUxpc3QgPSByZXNwb25zZTsKICAgICAgICAgIF90aGlzMi5wYWdpbmF0aW9uLnBhZ2UgPSBfdGhpczIubW92aWVMaXN0LmRhdGEucGFnZTsKICAgICAgICAgIF90aGlzMi5wYWdpbmF0aW9uLnRvdGFsID0gX3RoaXMyLm1vdmllTGlzdC5kYXRhLnRvdGFsX3BhZ2VzOwogICAgICAgICAgX3RoaXMyLnNlYXJjaCA9IHRydWU7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3Igd2hpbGUgZmV0Y2hpbmcgbW92aWVzJywgZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2VhcmNoID0gZmFsc2U7CiAgICAgICAgdGhpcy5vbkZldGNoTW92aWVzKCk7CiAgICAgIH0KICAgIH0sCiAgICBmb3JtYXREYXRlOiBmdW5jdGlvbiBmb3JtYXREYXRlKHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZSkgewogICAgICAgIHJldHVybiBtb21lbnQoU3RyaW5nKHZhbHVlKSkuZm9ybWF0KCdNTS5ERC5ZWVlZJyk7CiAgICAgIH0KICAgIH0sCiAgICBvblBhZ2VDaGFuZ2U6IGZ1bmN0aW9uIG9uUGFnZUNoYW5nZSgpIHsKICAgICAgdGhpcy5vbkZldGNoTW92aWVzKCk7CiAgICB9LAogICAgb25GYXZvdXJpdGU6IGZ1bmN0aW9uIG9uRmF2b3VyaXRlKGZhdiwgbW92aWUpIHsKICAgICAgLy8gY29uc29sZS5sb2coZmF2LCBtb3ZpZSk7CiAgICAgIGlmIChmYXYpIHsKICAgICAgICBtb3ZpZS5mYXZvdXJpdGUgPSBmYXY7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oSlNPTi5zdHJpbmdpZnkobW92aWUuaWQpLCBKU09OLnN0cmluZ2lmeShmYXYpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShKU09OLnN0cmluZ2lmeShtb3ZpZS5pZCkpOwogICAgICB9CgogICAgICB0aGlzLm9uRmV0Y2hNb3ZpZXMoKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLm9uRmV0Y2hNb3ZpZXMoKTsKICB9Cn07"},{"version":3,"sources":["MoviesComponent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,MAAA,MAAA,QAAA;AAEA,IAAA,MAAA,GAAA,kCAAA;AACA,YAAA,CAAA,OAAA,CAAA,QAAA,EAAA,MAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,EAAA,EAAA;AADA,GAFA;AAMA,EAAA,IANA,kBAMA;AACA,WAAA;AACA,MAAA,kBAAA,EAAA,iDADA;AAEA,MAAA,SAAA,EAAA,IAFA;AAGA,MAAA,UAAA,EAAA;AACA,QAAA,IAAA,EAAA,CADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAHA;AAOA,MAAA,KAAA,EAAA,EAPA;AAQA,MAAA,MAAA,EAAA;AARA,KAAA;AAUA,GAjBA;AAmBA,EAAA,OAAA,EAAA;AACA,IAAA,aADA,2BACA;AAAA;;AACA,MAAA,KAAA,CAAA,GAAA,+DAAA,MAAA,mBAAA,KAAA,UAAA,CAAA,IAAA,GACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,SAAA,GAAA,QAAA;AACA,QAAA,KAAA,CAAA,UAAA,CAAA,IAAA,GAAA,KAAA,CAAA,SAAA,CAAA,IAAA,CAAA,IAAA;AACA,QAAA,KAAA,CAAA,UAAA,CAAA,KAAA,GAAA,KAAA,CAAA,SAAA,CAAA,IAAA,CAAA,WAAA;;AAEA,QAAA,KAAA,CAAA,SAAA,CAAA,IAAA,CAAA,OAAA,CAAA,OAAA,CAAA,UAAA,GAAA,EAAA;AACA,cAAA,YAAA,CAAA,OAAA,CAAA,MAAA,CAAA,GAAA,CAAA,EAAA,CAAA,CAAA,EAAA;AACA,YAAA,GAAA,CAAA,SAAA,GAAA,OAAA,CAAA,YAAA,CAAA,OAAA,CAAA,MAAA,CAAA,GAAA,CAAA,EAAA,CAAA,CAAA,CAAA;AACA,WAFA,MAEA;AACA,YAAA,GAAA,CAAA,SAAA,GAAA,KAAA;AACA;AACA,SANA,EALA,CAYA;;AAEA,OAfA,EAeA,KAfA,CAeA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,6BAAA,EAAA,KAAA;AACA,OAjBA;AAkBA,KApBA;AAsBA,IAAA,cAtBA,0BAsBA,KAtBA,EAsBA;AAAA;;AACA,UAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,GAAA,6DAAA,MAAA,oBAAA,KAAA,GACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,UAAA,MAAA,CAAA,SAAA,GAAA,QAAA;AACA,UAAA,MAAA,CAAA,UAAA,CAAA,IAAA,GAAA,MAAA,CAAA,SAAA,CAAA,IAAA,CAAA,IAAA;AACA,UAAA,MAAA,CAAA,UAAA,CAAA,KAAA,GAAA,MAAA,CAAA,SAAA,CAAA,IAAA,CAAA,WAAA;AACA,UAAA,MAAA,CAAA,MAAA,GAAA,IAAA;AAEA,SAPA,EAOA,KAPA,CAOA,UAAA,KAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,6BAAA,EAAA,KAAA;AACA,SATA;AAUA,OAXA,MAWA;AACA,aAAA,MAAA,GAAA,KAAA;AACA,aAAA,aAAA;AACA;AACA,KAtCA;AAwCA,IAAA,UAxCA,sBAwCA,KAxCA,EAwCA;AACA,UAAA,KAAA,EAAA;AACA,eAAA,MAAA,CAAA,MAAA,CAAA,KAAA,CAAA,CAAA,CAAA,MAAA,CAAA,YAAA,CAAA;AACA;AACA,KA5CA;AA8CA,IAAA,YA9CA,0BA8CA;AACA,WAAA,aAAA;AACA,KAhDA;AAkDA,IAAA,WAlDA,uBAkDA,GAlDA,EAkDA,KAlDA,EAkDA;AACA;AACA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,SAAA,GAAA,GAAA;AACA,QAAA,YAAA,CAAA,OAAA,CAAA,IAAA,CAAA,SAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,IAAA,CAAA,SAAA,CAAA,GAAA,CAAA;AACA,OAHA,MAGA;AACA,QAAA,YAAA,CAAA,UAAA,CAAA,IAAA,CAAA,SAAA,CAAA,KAAA,CAAA,EAAA,CAAA;AACA;;AACA,WAAA,aAAA;AACA;AA3DA,GAnBA;AAiFA,EAAA,OAjFA,qBAiFA;AACA,SAAA,aAAA;AACA;AAnFA,CAAA","sourcesContent":["<template>\n    <div>\n        <div class=\"content\">\n            <div class=\"search\">\n                <input type=\"text\" @keyup=\"onSearchMovies($event.target.value)\" placeholder=\"Search\">\n            </div>\n\n            <div class=\"dropdown\" :class=\"{ 'show' : movieList && search }\" v-if=\"movieList\">\n                <ul class=\"movie-item\" v-for=\"movie in movieList.data.results.slice(0, 5)\" :key=\"movie.id\">\n                    <li>\n                        <router-link :to=\"{name: 'movie', params: {id: movie.id}}\">\n                            <div class=\"movie\">\n                                <div class=\"poster\" v-if=\"movie.poster_path\">\n                                    <img :src=\"moviePosterBaseUrl + movie.poster_path\">\n                                </div>\n                                <div class=\"text\">\n                                    <div class=\"title\">{{ movie.title }}</div>\n                                    <div class=\"date\"><b>Date:</b> {{ formatDate(movie.release_date) }}</div>\n                                    <div class=\"date\"><b>Rating:</b> {{ movie.vote_average }}</div>\n                                </div>\n                            </div>\n                        </router-link>\n                    </li>\n                </ul>\n            </div>\n\n            <div class=\"movies-content\" v-if=\"movieList && !search\">\n                <ul class=\"movie-item\" v-for=\"movie in movieList.data.results\" :key=\"movie.id\">\n                    <li>\n                        <router-link :to=\"{name: 'movie', params: {id: movie.id}}\">\n                            <div class=\"title\">{{ movie.title }}</div>\n                            <div class=\"poster\" v-if=\"movie.poster_path\">\n                                <img :src=\"moviePosterBaseUrl + movie.poster_path\">\n                            </div>\n                        </router-link>\n                    </li>\n                    <div class=\"fav-Ã­con\">\n                        <i class=\"material-icons\"\n                           v-if=\"!movie.favourite\"\n                           @click=\"onFavourite(true, movie)\">star_border</i>\n\n                        <i class=\"material-icons\"\n                           v-if=\"movie.favourite\"\n                           @click=\"onFavourite(false, movie)\">star</i>\n                    </div>\n                </ul>\n            </div>\n\n            <v-pagination class=\"pagination\" v-if=\"movieList && !search\"\n                          v-model=\"pagination.page\"\n                          :length=\"pagination.total\"\n                          total-visible=\"10\"\n                          @input=\"onPageChange\">\n            </v-pagination>\n        </div>\n    </div>\n</template>\n\n<script>\n    import axios from 'axios';\n    import moment from 'moment';\n\n    const apiKey = 'ef817d509d5dbf9ce8b44c73e7bb30b4';\n    localStorage.setItem('apiKey', apiKey);\n\n    export default {\n        name: 'movies',\n        props: {\n            id: Number\n        },\n\n        data(){\n            return{\n                moviePosterBaseUrl: 'https://image.tmdb.org/t/p/w600_and_h900_bestv2',\n                movieList: null,\n                pagination: {\n                    page: 1,\n                    total: 0\n                },\n                query: '',\n                search: false\n            }\n        },\n\n        methods: {\n            onFetchMovies() {\n                axios.get(`https://api.themoviedb.org/3/discover/movie?api_key=${apiKey}&page=${this.pagination.page}`)\n                .then(response => {\n                    this.movieList = response;\n                    this.pagination.page = this.movieList.data.page;\n                    this.pagination.total = this.movieList.data.total_pages;\n\n                    this.movieList.data.results.forEach(mov => {\n                        if (localStorage.getItem(String(mov.id))) {\n                            mov.favourite = Boolean(localStorage.getItem(String(mov.id)))\n                        } else {\n                            mov.favourite = false;\n                        }\n                    });\n                // console.log(this.movieList.data.results);\n\n                }).catch((error) => {\n                    console.log('Error while fetching movies', error)\n                });\n            },\n\n            onSearchMovies(query) {\n                if (query) {\n                    axios.get(`https://api.themoviedb.org/3/search/movie?api_key=${apiKey}&query=${query}`)\n                    .then(response => {\n                        this.movieList = response;\n                        this.pagination.page = this.movieList.data.page;\n                        this.pagination.total = this.movieList.data.total_pages;\n                        this.search = true;\n\n                    }).catch((error) => {\n                    console.log('Error while fetching movies', error)\n                    });\n                } else {\n                    this.search = false;\n                    this.onFetchMovies();\n                }\n            },\n\n            formatDate(value) {\n                if (value) {\n                    return moment(String(value)).format('MM.DD.YYYY');\n                }\n            },\n\n            onPageChange() {\n                this.onFetchMovies();\n            },\n\n            onFavourite(fav, movie) {\n                // console.log(fav, movie);\n                if (fav) {\n                    movie.favourite = fav;\n                    localStorage.setItem(JSON.stringify(movie.id), JSON.stringify(fav));\n                } else {\n                    localStorage.removeItem(JSON.stringify(movie.id));\n                }\n                this.onFetchMovies();\n            }\n        },\n\n        created() {\n            this.onFetchMovies();\n        }\n    }\n</script>\n\n<style>\n    .search {\n        margin: 0 auto;\n        padding: 20px;\n        width: 70vw;\n        display: flex;\n    }\n\n    .search input {\n        padding: 10px;\n        height: 40px;\n        min-width: 300px;\n        font-size: 19px;\n        border-radius: 4px;\n        background: white;\n        border: 1px solid #000000;\n    }\n\n    .search input::placeholder {\n        font-size: 19px;\n    }\n\n    .movies-content {\n        margin: 0 auto;\n        padding: 20px 0 60px;\n        width: 70vw;\n        display: flex;\n        flex-wrap: wrap;\n        justify-content: space-between;\n    }\n\n    .movies-content ul {\n        margin: 20px;\n        padding: 0;\n    }\n\n    ul li {\n        list-style: none;\n    }\n\n    .movies-content .title {\n        margin-bottom: 10px;\n        max-width: 180px;\n        font-size: 19px;\n        white-space: nowrap;\n        overflow: hidden;\n        text-align: center;\n        text-overflow: ellipsis;\n    }\n\n    .movies-content .poster img {\n        max-width: 320px;\n        max-height: 280px;\n        box-shadow: 0 4px 8px 1px rgba(0,0,0, .2), 0 2px 2px 0 rgba(0,0,0, .14), 0 1px 5px 0 rgba(0,0,0, .12);\n    }\n\n    .movies-content .movie-item {\n        position: relative;\n    }\n\n    .movies-content .fav-Ã­con {\n        width: 46px;\n        height: 40px;\n        position: absolute;\n        bottom: 2px;\n        background: #FFFFFF;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        padding: 2px;\n        cursor: pointer;\n    }\n\n    .theme--light.v-pagination .v-pagination__item--active {\n        color: #FFFFFF !important;\n        background: grey !important;\n    }\n\n    .search input:focus,\n    button:focus {\n        outline: none;\n    }\n\n    .pagination {\n        margin: 0 auto;\n        padding: 0 0 40px;\n        width: 70vw;\n    }\n\n    .dropdown {\n        margin: 0 auto;\n        width: 70vw;\n        padding: 20px;\n        max-height: 300px;\n        transition: all 0.1s ease-out;\n        opacity: 0;\n    }\n\n    .dropdown.show {\n        opacity: 1;\n        height: 100%;\n    }\n\n    .dropdown .movie-item {\n        display: none;\n        margin-bottom: 10px;\n    }\n\n    .dropdown.show .movie-item {\n        display: flex;\n    }\n\n    .dropdown.show .movie-item {\n        display: flex;\n    }\n\n    .dropdown .movie-item:hover {\n        background: rgba(255, 255, 255, .6);\n    }\n\n    .dropdown .movie-item .movie .text {\n        padding: 5px;\n    }\n\n    .dropdown .movie-item .movie .text .date {\n        margin-top: 0;\n        font-size: 16px;\n    }\n\n    .dropdown .poster img {\n        margin-right: 10px;\n        width: 70px;\n        height: 100px;\n    }\n\n    .dropdown .movie {\n        display: flex;\n    }\n</style>"],"sourceRoot":"src/pages"}]}